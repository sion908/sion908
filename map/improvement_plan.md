# 2026年 居留地まつり マップ体験改善方針

## 1. 現状の問題点

「居留地まつり」は会場が広域で高低差もあり、イベント数も増加傾向にある。
しかし、既存の**紙チラシ（PDF）**では、「いま自分がどこにいて、次にどこで何が起きるか」を把握する用途に耐えなくなっている。

## 2. 原因の構造

単に情報量が多いだけでなく、イベントの性質と媒体の特性がミスマッチを起こしている。

1.  **時間×場所×移動の分断**
    *   **時間**: 1ページ目の文字情報に散在
    *   **場所**: 2ページ目の地図に散在
    *   **移動**: 脳内でこれらを統合してルートを考える必要があるが、イベント数が増えるほど困難になる。
2.  **3次元情報の欠落**
    *   広域かつ坂の多い地形おいて、平面地図では「移動の負荷」や「次の目的地への到達可能性」が直感的に判断できない。
3.  **フィルタリング不能**
    *   多様なニーズ（家族連れ、雨天時、特定のジャンルなど）に対し、紙面では情報の絞り込みができず、全員が全情報を読むコストを強いられている。

## 3. やりたい方向性（改善のゴール）

紙の制約から解放し、「地図」と「時刻」を一体化した **「イベントの“再生できる地図”」** を目指す。

*   **立体/地図表示 + 現在地**: 地形と自分の位置関係を把握。
*   **POI（Point of Interest）**: 店舗、会場、イベントを地図上に重ねる。
*   **時間軸（タイムライン / シークバー）**:
    *   時刻操作により「その時、どこで何が起きているか」を可視化。
    *   音楽隊などの移動イベントは、アニメーションで軌跡を表示。
    *   「次（未来）」の状況もシミュレーション可能にする。

## 4. 必要データ（構造化データ）

紙面のテキスト情報から脱却し、以下のデータをリレーショナルに管理する必要がある。

*   **イベントデータ**: ID, タイトル, カテゴリ（音楽/体験/飲食等）, 開始/終了時刻, 雨天対応フラグ
*   **場所データ**: 会場ID, 座標（点/エリア）, 地形特性（必要であれば）
*   **移動データ**: ルート座標配列（軌跡）, 通過時刻（タイムスタンプ）

---

## 5. エンジニアとしての評価と提言

提示された方向性と、実装されたプロトタイプ（MapLibre GL JS + deck.gl）について、技術的な観点から評価します。

### 課題設定の妥当性：★★★★★ (Excellent)
「イベントの多層性（時間・場所・移動）」に対して「紙媒体の限界」を課題の根本原因と特定した点は非常に鋭いです。
単に「スマホ対応する（レスポンシブWebにする）」だけでは解決しない、「動的なコンテキスト（今、ここで、何ができる？）」への回答として、**時空間（Spatio-temporal）情報としての再構築**は最適なアプローチです。

### 技術選定（deck.gl + MapLibre）：★★★★☆ (Great)
*   **TripsLayerの採用**: パレードや行列などの「移動体」を表現する上で `TripsLayer` は非常に強力です。静的な線ではなく「動き」として見せることで、ユーザーは直感的に「今どこに隊列がいるか」「これからどこへ向かうか」を理解できます。
*   **MapLibre（地図基盤）**: 軽量でカスタマイズ性が高く、3D地形表現も可能であるため、長崎のような「坂の多い街」の表現に適しています。
*   **懸念点**: WebGLを使用するため、古いスマートフォンや一部の環境では動作が重くなる、またはバッテリー消費が早くなる可能性があります。軽量モード（2Dのみ、アニメーションなし）のフォールバックも検討の余地があります。

### データ構造設計：★★★★☆ (Great)
現在ご提示いただいているJSON構造（`event`, `location`, `route` の分離）は、正規化されており拡張性が高いです。
*   **ID管理**: `location_id` でイベントと場所を紐づける設計は、将来的に「場所ごとのイベント一覧」を出したり、「イベントの場所変更」に対応する際に非常に有利です。
*   **タイムスタンプ**: 移動データの `timestamps` を相対時間または絶対時間で管理することで、シークバーとの厳密な連動が可能になります。

### UX/UI設計への提言
現状のプロトタイプは機能要件を満たしていますが、一般ユーザー向けに以下の視点が必要です。
1.  **「今」ボタン**: シークバーを操作した後、即座に現在時刻（リアルタイム）に戻れるボタンが必要です。
2.  **リスト表示との併用**: 地図は「状況把握」に優れますが、「一覧性」ではリストに劣ります。「13:00〜のイベント一覧」のようなドロワー（引き出し）UIを地図の手前に配置し、タップすると地図がそこに飛ぶ、という相互連携があるとより親切です。
3.  **現在地連動**: 「会場まであと何分」のような簡易的なナビゲーション（Google Mapsへのリンクでも可）があると、実際の行動支援になります。

### 総合評価
このアプローチは、単なる「デジタル化」を超えた「イベント体験のアップデート」になり得ます。
今年は**「移動イベントの可視化」**と**「現在時刻周辺のイベント把握」**の2点に絞ってリリースし、ユーザーの反応を見るという進め方が、開発リソースとリスク管理の観点からも推奨されます。
